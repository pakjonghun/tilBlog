---
date: 2022-06-11
category: til
---

## 오늘 한 일

- 알고리즘 : 스킬트리(풀음)
- sql 문제 : join 1문제(푸는중)
- socket.io 학습
  - 성능 측정 프로젝트 작성(진행중)
  - node cluster, socket.io adapter, redis adapter
  - node, react, server 이렇게 3개의 큰 틀로 이루어진 구조를 학습중

## 어려운점

- 알고리즘 : 스킬트리(비교적 쉬운 문제였다, 다른사람 풀이보고 조금 더 축소해서 코드를 작성했다.)
  - 스킬 순서에 맞지 않는 경우를 카운트 에서 제거 하는 문제였다.
  - 스킬 순서에 맞게 나오는지 인덱스를 가지고 계속 확인하면서 제거 해줬다.
  - 반복문 2번 사용 할 수 밖에 없는 문제라고 생각을 했고(실제로 다른사람 풀이 보면 그랬음)
  - include, find, indexof, some 등등 하나만 찾는 매서드를 골라서 사용하는 차이 만 있는 것 같았다.
- sql : join 은쉽게 되는데 어떨때 subQuery 를 써야 할지 감이 안온다.
  - 하다가 하도 안풀려서 다른사람 풀이를 여러개 봤는데 서브쿼리 엄청 적어 놨길래
  - 하하.. 그냥 손을 놓았다 개인적으로 서브쿼리는 정말 좋지 않은 방법이라고 생각하는데
  - 그 이유는 너무 복잡해 지기 떄문이다.
  - 진짜 풀 수 있는 방법이 그것밖에 없는지 좀더 고민해보고 풀어야 겠다는 생각을 했다.
- socket.io : 와 새로운 것 많이 배웠다.
  - node 는 기본적으로 싱글 쓰레드 다.
    - 싱글 쓰레드 말고 여러개 쓰레드를 사용하기 위한 방법이 별도로 제공되는데
    - 그것이 node cluster 다
    - master cluster 가 작업을 각 클러스터에게 할당하는데
    - 문제는 클러스터는 독립된 것이라서 다른클러스터 내용을 모른다.
    - 다른 클러스터 내용을 공유할 것이 생기면 문제가 되는데
    - 이를 해결하기 위해 socket.io redis adapter 를 사용한다.
    - 레디스에서 process.pid 를 기억을 하는 것 같은데(이거 별도로 설정 안해도 어뎁터만 만들어주면 알아서 작동한다)
    - 작업이 끊겼다가 다시 연결 되도 똑같은 클러스터로 이동해서 다시 작업하는 모습을 볼 수 있었다.
    - 이를 이용해서 성능을 향상 시킬 수 있다고 하는데
    - 지렁이 게임 2명만 들어가도 엄청 느린데 한번 클러스터 적용해서 다시 만들어 봐야겠다.
    - node 를 이용해서 cpu memory corenumber 등등 각종 해당 기기의 성능을 측정 할 수 있었다.
    - 이런 기능이 있는지 아예 몰랐는데 너무 신기했다.
    - mongodb 는 초기 접속 할때만 데이터를 조회하거나 저장했고, 진행하는 동안은 별도로 db 접근을 안했는데 아마 마지막에 하지 않을까 싶다.
    - 채팅 할때 언제 db 에 접근하는지 잘 판단이 안됬는데
    - 별도로 채팅 프로젝트도 한번 해봐야 겠다고 생각했다.(채팅만 별도로)
  ## 해야할 일
  - sql : 어렵고 복잡하지만 그래도 하루 1문제는 풀자...
  - 알고리즘 : 프로그래머스 문제도 이제 2페이지 정도 남은 것 같다 다 풀고 또 반복해서 풀어보자
  - socket.io 아 할수록 신세계라는 생각이 든다
    - 성능 측정 프로젝트가 끝나면 바로 지렁이 게임 업그레이드 작업 해보자
    - 업글 작업도 끝나면 다른 인강 하나만 더 듣자 채팅 을 전문적으로 구현하는 그런 인강을 한번 보자
    - 왜냐하면 db 저장 시점 redis 를 이용하는 시점이 궁금하다.
