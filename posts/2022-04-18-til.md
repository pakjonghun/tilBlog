---
date: 2022-04-18
category: til
---

## 오늘 한 일

- 페이지네이션 기능 구현(클릭 해서 넘기는 방식)
- 소트 기능 작성(소트 옵션 설정하는 state 작성, 고른 소트 하나만 담기는 state 작성)
- timeout index page 작성
- 각 기능 api 함께 작성 후 프론트 연결 및 테스트
- pagnation , sort 기능은 많이 사용 하는 기능이라서 hook 으로 별도 작성(모달도 빼야 하는데 아직 몰라서 놔둠)

## 어려운점

- 소트 기능부터 막히기 시작했다.
- 명확히 어떻게 정렬 할지 정하지 않은 상태에서 만들고 지우고 고민하고 또 만들다가 다 지우고 또...
- 가장 어려운 점은 정렬을 데이터 연결 없이 하려고 한 점이다
- 각 column 을 별도로 옵션을 넣고 소트는 또 따로 작성해 놓은 상태였는데
- 처음부터 column 옵션에 소트까지 다 넣어서 관리 하는 것이 맞는 방법이었다.
- 그리고 sort 를 null asc desc 로 해서 null 은 소트안함, asc , desc 로 각각 svg 와 매칭 시켜주었고
- 서버 api 도 만들어서 붙여 주었다 잘 작동한다.
- 소트를 redux 에서 그냥 브라우저에서 혼자 돌리면 .. 최신화된 데이터가 오지 않는 단점이 있어서
- 서버와 연동해서 계속 돌려주었다. 어처피 서버 느려도 swr 이 최신 데이터 보여주니까~~
- caching mutation 도 1개 주었다(index 페이지에서 시간 기록은 별도로 받지 않고 그냥 캐쉬로 그려주었다.
- start 누를때 바로 서버에 저장 할지 종료 할때 한번에 저장할 지 고민하다가 종료할 때 한번에 저장 하는 걸로 작성했는데
- 이렇게 하면 관리자가 현재 누가 초과근무 중인지 알 수가 없다.
- 수정 할 필요가 있어 보인다.
- 처음에 start 하면 일하는 중 상태로 저장해 두었다가.
- end 누르면 end 시간 마저 넣어주면서 끝마침 상태로 업데이트 하는 방식이 좋아 보이는데.
- 하... 조금 많이 고쳐야 할 것 같다.

## 해야 할 일

- 시작 할때 db 저장하고 끝날때 업뎃 하는 방식으로 변경하고(완료, 상태 유지기능까지 추가함!)
- 매니저 레코드 보는 표(데이터, 네임 별 보기, 모든 유저 정보 다 볼수 있게 만들기, 그 날 것만 보게 할 것! 그날 상태 확인용 매니저만)
- 매니저 레코드 검색 기능 만들기(모든 날짜 데이터 확인 달력, 필터링 기능 다 추가 할 것)
- 검색기능끝나고 여유되면 포스트 넘어갈 것
- post 는 ssh 로 작성한다(처음에 보여주는 글만)
- 왜냐하면 글 작성은 어처피 관리자만 할 수 있으니까 관리자가 적고 혼자 하는 거고 댓글 달리는 거야 들어가야 볼 수 있는 거니까 상관없고.

- 그러면 남은 작업은
  - 게시판 : 댓글 작성, 답글 작성
  - 프로파일 업데이트
  - 어드민
    - 포스트 작성
    - 레코드 검색, 이름날짜 별 표 전환, 레코드 수정
  - 종료 시간 되면 서버에서 삭제 해주는 콘탭 하나 만들고(이거 next 에서 가능한가?)
  - next 에서는 별도 툴이 없고 타사 서비스를 이용 해야 한다.[링크]('https://vercel.com/docs/concepts/solutions/cron-jobs')
