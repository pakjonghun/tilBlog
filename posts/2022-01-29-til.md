---
category: til
date: 2022-01-29
---

## 오늘 한 일

1. nestjs 로 서버 구축연습
2. 하다보니 class validator 로 유효성 검사 하는 부분에서 새로운 것을 알게 되서 매달려보았다.
3. 바로 유효성검사를 하면서 곧바로 db와 통신을 해서 중복여부를 알아내는 데코레이션 이었다.

## 어려운점

1. 데코레이션은 좋은데
2. 커스텀도 그렇게 어렵지 않았고
3. 문제는 class-validator 로 db와 통신까지 하려면 repo가 의존성 주입이 되야 하는데 그게 안되서 날밤을 샜다...
4. useContain(app.select(appModule))
5. 뭐 이런식으로 설정하고 @injectable 넣고 주입 하면된다고 하는데 안되서 속상했다.
6. 결국 decorator 을 처음부터 다시내가 그냥 만들수 없을까? 해서 처음부터 다시 보고 있는데
7. 생각보다 할게 많은것 같다.
8. 속성에 접근해서 유효성을 검사를 해서 false true 까지 띄웠다고 하자! 거기까지는 가능하다.
9. 그런데 그 다음에 res 에 접근해서 exception 에 접근해서 뭔가를 반환하는 것도 가능할 것 같다.
10. 하.. 충분히 가능한데... 충분히 할 수 있지?? ㅋㅋ 그런데 왜케 어렵지..?
11. 너무 library 에 매달리는 건 안좋다 이럴때는 데코레이션을 커스텀 스스로 해 봐야지!!!
12. 역시 의존성 주입 받는 것이 문제인데
13. 더미 클레스를 만들고 그 클레스에 @injectable 로 의존성 주입받아서 통신 기능을 넣고
14. 유효성 성공하면 고 실패하면 백 을 하려고 하면
15. 더미 클레스에 클레스 데코를 얹어져 ..클레스에 서 작업 한거를 함수로 어떻게 빼서 갖고오지??
16. 여튼 이런 점이 어렵웠고 지금도 진행중이다..

## 해야 할일

1. class-validator 로 db 통신까지 해보자.
2. 진짜 멋진 기능인데 한번 완성 해보자 유효성 검사를!!
