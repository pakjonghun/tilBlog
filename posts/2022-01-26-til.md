---
category: til
date: 2022-01-26
---

## 오늘 한 일

- 무한스크롤에 윈도우잉 적용
- 각종 오작동(리덕스저장소에 다른 데이터 저장됨, 필터링 오작동, 패칭 후 스크롤이 0이 되는오작동 등)수정
- 훅, 컴포넌트 단위 리팩토링

## 어려운점

- 쪼개기전에는 잘 됬는데 리팩토링 후에 안되는 기능이 있어서 속상하다. 앞으로 꼼꼼히 살피면서 해야겠다.
- 가상화를 2가지 라이브러리를 계속 사용해서 해봤는데 결국 react-virtualize 를 이용했다.
- react-window 는 사이즈를 계산하고, 윈도우 전체 화면에 적용하고, 계산한 사이즈를 캐쉬에 넣는 등의 기능을 일일히 구현해줘야해서 시간이 오래 걸릴것 같아서 중도 하차했다.
- 컴포넌트가 체계적으로 나눠지지 않은 것 같다.
- 왜 이런 느낌이 드냐면 useEffect에 dependency 다 이것저것 많다보니 랜더링이 자꾸 반복해서 일어나서 추적히 힘들었기 때문이다.
- 서버에서 받은 데이터가 예상치 않았던 column이 들어있거나 없는 경우가 있어서 고생했다. 외부 api 를 이용할때는 막무가내로 사용 할 것이 아니라..
- 앞으로 받게되는 데이터를 api 문서를 보고 따져보고 나누는 작업을 먼저 해야 할 것 같았다.
- 타입이 많이 꼬였다. 합쳐도 될것들, 나눠야 될것들 이것저것 막 섞어서 사용한 것 같아서 속상하다.
- 서버에서 받는 data 형식을 잘 따져보고 처음에 설계를 잘 해다면 좀더 편했을 것 같았다.

## 해야 할 일

- 오작동1 . 검색 결과 검색 숫자를 개선해야한다.(지금은 총 숫자만 나옴)
- 오작동2 . 처음에 검색된 데이터가 media-type 이 undefined 되어있다. 원인을 찾아서 해결해야한다.
- 오작동3 . 처음에 검색된 데이터의 사진 간격이 너무 붙어있다. 나중에 스크롤 하면서 떨어지긴 하지만... 바꿔야 할 듯 하다. cache 문제인가?
- 오작동4 . 아이프레임에 사진 덮은것, 없는 이미지에 씌울 기본 사진, 스크롤 할때 윤곽 등을 스켈레톤 으로 처리하면 좋지 않을까?
- 각종 오류가 뜰 때가 있다. 오류가 뜨면 오류페이지로 보내고, 뒤로가기 버튼을 제공해야 한다.
- 검색페이지 제외하고 모든페이지가 슬라이더가 너무 밑에있어서 첫 화면에 안보인다.
