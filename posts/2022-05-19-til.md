---
date: 2022-05-19
category: algo
---

## 오늘 한 일

- 알고리즘 : 삼각달팽이(푸는중)
  - 규칙을 2개정도 알아내면
  - 그 중 먼저 알아낸 규칙을 코드로 구현하면서 작성중이다.
  - 알아낸 규칙
    - 각 변의 길이 n
    - 배열의 수(row) 는 n
    - 각 배열의 시작 숫자 = 배열의 길이
    - 맨 마지막 row 는 n 부터 n개 만큼 연속된 수의 배열
    - 달팽이 채우기 좌표 규칙
      - 맨 처음 할 일 : 길이가 1~n 인 배열을 만든다.
      - 1번. 각 배열 0(init col = 0) 에 1부터 n까지 순서대로 채운다. n번
      - 2번. 맨 마지막 row(init row = n-1) 에 0인덱스 말고 다음 것 부터 수를 이어서 채운다 n-1번
      - 3번. 이번엔 각 배열의 맨 뒷 index(init col = 각 배열 맨 앞자리 수 -1)에 이어서 수를 채우는데 밑에서 부터 채워야 하고 n-2 번 순회된다.
      - 1번~3번 계속 반복 하면서 n-m 이 1 이 될때까지만 하면 배열이 완성되고
      - 개열을 순서대로 꺼내서 합쳐주고 리턴하면 끝날 것 같다.
  - 보완해야 하는 점
    - 달팽이 채우기 좌표의 규칙이 허술하다 여기 보완하면서 계속 코드 작성 하면될듯
- search movie project
  - 1차 시도
    - 스크롤 될 페이지에 검색 결과를 필터링 했을때 결과가 0 개면..
    - 어떻게 처리 할지 고민하면서 온갖 스테이트를 만들어서 부모 자식간에 돌려 가면서 이것 저것 해봤다.
    - 원하는대로 구현을 했는데(5번 이상 결과가 0 일경우 버튼을 띄워서 계속 할지 말지 물어봄)
    - 너무 이상해서 다시 다 뒤집어 엎고 새로 만들었다.
  - 2차 시도
    - 조금 덜 깜빡이게 하려고 랜더링이 일어나는 것을 최소화 해봤다.
    - loadable 방식으로 전부 다시 작성했다.
    - 깜빡이는 것이 줄긴 했지만
    - 여전히 이상하다. 고민 해보니 무한스크롤 할 수 없는 곳에서 무한스크롤을 억지로 하려고 하니
    - 그런것 같다는 생각을 하게 되었다.
    - 스크롤 된 값에서 결과값이 없어서 다시 커서+1 을 해주고 이걸 반복하는 방법 자체가
    - 잘못 됬다고 생각했다.
  - 3차 시도
    - 필터링 한 값은 그래로 둔다(필터링 했더니 매칭 되지 않는다고 지우는 것이 아니라)
    - 그대로 놔두고 블러 처리를 하던가 한다.(이거 지우면 무한스크롤 자체가 성립이 안된다)
    - 앞에 2가지를 전제로 두고 이번에는 좀 색다르게 해봤다.
    - 아이디만 다 가져와서 atomFamily 에 effect 로 저장하고
    - 이 아이디로 만들 배열로 컨테이너를 만들어서 순회를 해주었다. loadable 방법으로 했다.
    - 마지막 item 그리는 부분에서 각 id 로 통신하는 atomfamily 를 또 만들어서 붙여줬는데
    - 앗차.. 이거 처음에 한것 처럼깜박이네
    - 이때 알았다. 통신한 값으로 배열을 만드므로 모든 배열이 싹다 깜빡일 수 밖에 없다는 것을
    - 조금 더 보완을 해서 다시 해볼 생각이다(그냥 loadable 이 아니라 nowait 같은 방법으로 깜빡이는거 없앨 수 있지 않을까??)
  - 4차시도(시도중)
    - 필터링 한 값은 그래로 둔다(필터링 했더니 매칭 되지 않는다고 지우는 것이 아니라)
    - 그대로 놔두고 블러 처리를 하던가 한다.(이거 지우면 무한스크롤 자체가 성립이 안된다)
    - 뒤 2가지 전제는 그대로 살리고
    - selectorFamily 로 전체 커서길이 만큼 배열을 갖고와서
    - selectorQueery 로 연달아서 실행하고 이 값을 병렬로 내려받는다.
    - 이렇게 하면 쉽게 해결될 것 같다. waitForNone 배열로 통신 하고 내려받으면 될 것 같다.

## 어려운점

- 고민하는게 어렵다.
- 어떻게 만들고 어떻게 고칠지 고민 하는것이 어렵다.
- 찾아보고 따라하고 하는것도 한계가 있는 것 같다.
- 결국 내가 수정을 계속 해야 되기 때문이다.
- 이럴때 일수록 기초가 중요하다는 것을 느끼게 된다.
- react doc 다시 읽고 이해안되는거 다시 파고, 또 반복하고 계속 노력해야 할 것 같다.

## 해야 할 일

- popular 영화 마무리
- popular tv 마무리
- onAir 영화 마무리
- onAir tv 도 마무리
- Search movie 마무리
- Search Tv 도 마무리
