---
category: til
date: 2022-02-09
---

## 오늘 한 일

- status 별 order api 작성
- subscription 적용 web-socket 적용
- eager, lazy relation 적용

## 어려운점

- eager relation 을 적용하면서 gql (n+1) 개념에 대해서 알게되었다.
- gql 이 오버패칭 언더패칭을 줄여서 좋긴 하지만
- 작동방식이 select쿼리를 계속 발생 시켜서 db에 접근을 여러번 해서 비용이 비싸지는 문제가 있다는 것을 알게되었다.
- 해결방법으로 data-load 같은 라이브러리가 있는데 사용은 안해봤고,
- 아 이런 방법이 있구나 이런 문제가 있구나 하는 식으로 이해만 하고 넘어갔다.
- 프로젝트 만들고 느리네 문제있네 싶을때 적용 해보면 좋을 것 같다.
- nestjs 사용하니까 너무나도 쉽게 socket 을 사용 할 수 있어서 좋았다.
- gql 과 같이 사용하니 이건. 알아서 필터기능도 있고 resolve 도 추가 할 수 있고 모듈에 주입만 해주면 글로벌로 pubsub 도 사용할 수 있어서 좋아 보였다.
- 단 서버가 여러개 일때 객체를 가지는 서버를 별도로 두라고 되어 있던데
- 사실 잘 모르겠다. 서버 여러개? 그렇게 까지 한 적이 없어서 의문이 들었다. 그럴 일이 있을까? 나 혼자 프로젝트 하면서 그럴일은 별로 없을 것 같았다.
- socket 을 사용면서 cache와 같이 사용하면 정말 좋을 것 같다는 생각을 했다
- subscription-redis-grqphl 이라는 게 있던데 허 참... 어처피 실시간으로 할거 실시간이면 db 접근도 안한다고 설명을 해주던데(물론 할 수도 있겠지만 db에 접근 안해도 되는 것들위주로 적용 하면 되지 않나 생각이 들었다. 이거 제대로 이해한게 맞는지 모르겠는데...)
- 여튼 더 깊에 파고들면 cache 만지는 방법을 알아야 할 것 같다는 느낌이 들었다.
- 그러면서 자연스럽에 백엔드 하는 시간을 더 늘려야 하나? 는 고민이 들었다.
- 해도해도 끝이 없다.

## 해야 할 일

- 주말전까지 백엔드 정리를 하자. 이제 막바지이니 충분히 가능하다.
- 고민해야 할 점은 곧바로 프론트 만들어서 붙이면 백 해놓은거 또 다 까먹을 것 같은데 어쩔수 없다고 생각한다? 그래서 고민된다...
- 조금 더 시간을 투자해서 다시 만들어 보고 고치고 이해 안되는거 찾아서 고쳐보고 테스트 코드도 계속 쳐 보고 하는게 참 좋을 것 같은데...
- 그래서 내일은 백 마무리 하면서 좀더 고민해 보자. 어느 선까지 공부를 계속 할 것인지.
