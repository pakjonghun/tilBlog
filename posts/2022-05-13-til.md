---
date: 2022-05-13
category: til
---

## 오늘 한 일

- 알고리즘 : 프로그래머스 프렌즈 4블록 문제 푸는중(어렵다...)
  - 4칸이 같은 그림이면 없애면서 진행하는 게임임(테트리스 같은 문제)
  - 없어지는 블록의 횟수를 구하는게 문제인데
  - 어떻게 규칙을 충족 시키는지 확인하는 방법을 고민하는데 애를 먹고 있다.
- recoil 복습
  - 전반적인 패턴에 대해서 알아보았다.
  - id 만 보관해두었다가 컴포넌트 그릴때 써먹고 아이디만 프롭스로 전단하는 패턴 너무 좋아보였다.
  - 통신 받은 데이터를 selector 로 가로채서 가공하는 기술 의외로 복잡해서 이해하는데 오래 걸렸다.

## 어려운점

- 레코일 학습
  - 무료로 예제를 알려주는 외국 사이트를 찾아서 열심히 살펴 보는 중이다.
  - 레코일 예제를 계속 따라 했는데
  - 레코일 자체보다
  - 실제 코드 동작을 이해 하는데 시간을 많이 잡아먹었다.
  - 무슨 영어를 그렇게 빨리 말하는지... 알아듣기 위해서 몇번 되돌려 보면서 비디오 강의를 봤는데
  - 어려웠다. 영어 공부좀 해야겠다.
  - atomEffect 는 복잡한 리얼타임 이나 파라미터가 계속 변하는 그런 통신에 사용하는게 좋을 것 같았고
  - selector 는 같은 통신을 계속 반복 하는 패턴이 계속될때 사용하는 것이 좋아 보였다
  - selector 같은경우 url 에 넣는 값이 객체에서 뽑아낸 경우 캐슁이 자동으로 되지 않았는데
  - 이럴경우 별도로 셀렉터를 또 만들어서 그 값만 뽑아서 반환 하는 방식으로 해야 했고
  - 데이터를 가공하기 위해 최소한의 필요한 부분까지만 접근하는 selectorFamily 패턴은
  - typescript를 적용하기 어려운 부분이 보여서 불편해 보였지만
  - 독립된 스테이트를 만든다는 점에서 당장 불편하더라도 익숙해 지는 것이 좋겠다고 생각했다.
  - 역시 강좌 듣는 일은 지루하고 시간이 오래 걸린다.
  - 이제 다 들었으니 영화 검색 프로젝트 싹다 뜯어 고치면서 다시 시작해야 겠다

## 해야 할 일 그리고 계획

- 외국 분 코드라 그런지 차크라 UI LODASH IMMER REACT-ERROR-BOUNDARY 등등
- 잘 몰랐던 라이브러리를 많이 보게 되었고 차크라 UI 의 경우 계속 보니까 친숙해 지는 느낌이라서
- tailwind 와 같이 사용 해볼까 하고 고민도 해보았다.
- 아 그리고 한 페이지에 관련된 여러 컴포넌트를 같이 두는 패턴을 봤는데
- 강의때문에 편하게 하려고 그런건지 아니면 일부러 그런건지 모르겠다.
- 괜찮아 보였으나 분리 독립을 중요하게 생각 할 경우 별로 안좋을 수도 있다는 생각이 들어서
- 이 패턴은 따라하지 않는걸로...ㅋㅋ
- 일단 영화검색 프로젝트를 데이터 구조만 구상 하고 시작하자
  - 필터링 정보(그냥 아톰으로 작성한다 한페이지에 다 있으니 필터 종류별로만 나눈다.)
  - initState 는 아톰 파일에 다 넣는 방식으로 작성한다
  - 평점만 volum progress 방식으로 변경 가능한지 확인해보자 이거 탐난다.
- 영화 tv 데이터는 페이지 와 페이지 안에 들은 데이터 length 로 배열로 만들자
- 이 배열은 화면을 그리는데 사용하며
- 각 영화정보는 atomFamily 로 관리 시도해보자
- 그러니까 1페이지에 영화 20개 니까
- atomFamily 1 은 통신 셀렉터를 불러서 1페이지 데이터를 디폴트로 갖게 하자
- 그런식으로 각 페이지만 전달하면 그 컴포넌트 안에서 map으로 순회하면서 아이템을 그리게끔 만들자
- atomEffect 를 넣을 만한게 있을까?
- ErrorBoundary 써야하고 20개씩 묶인 곳은 서스팬스로 로딩도 잘 처리해줘야 한다.
- 이렇게 할 경우 문점은 다른 종류의 테이블로 전환할때 인데(평점순, 장르별 등등)
- 이것도 동일하게 atomFamily(다른 종류) 통신 셀렉터에 접근해서 디폴트 값을 정하게 하자
- 단 이것은 페이지 단위로 할 경우 숫자가 20개가 다 안찰 수 있다.
- 페이지가 다 안찰 경우 다음페이지로(다음 아톰 패밀리로)넘어가게 만들어야 한다.
- 에러바운더리와 로딩 서스펜스는 합쳐서 컴포넌트로 만들자(어떤 로더와 에러페이지를 띄울지는 변경 가능하게)
- 무한스크롤은 어떻게 할지 확실하게 정한다음에 접근해야 겠다 괜히 고생 할 수도. 있다.
- 지금 구상은 페이지 아톰은 숫자(1부터~페이지까지)
- 아이템리스트 아톰은 아톰 페밀리로 각 페밀리당 20개씩(이건 통신 후 들어온 데이터 len)
- 통신 selector 은 selector family 로 아톰 페밀리와 연결해 놓는다.
- 아톰 이펙트로 필요시 그 다음 페이지 미리 패칭(캐쉬에 넣도록) 시켜 놓는 것도 좋을 것 같다는 생각이 든다.(페이지는 안바꿈 수동 통신, 셀렉터를 통한)
