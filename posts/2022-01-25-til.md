---
category: til
date: 2022-01-25
---

## 오늘 한 일

- 스크롤 간 windowing 적용
- react-window 를 사용했다가 높이 조절 기능을 사용하려고 react-virtualized 로 변경함
- cache 가 grid 너비가 변경되면서 요소를 누락하는 이슈 해결(keymapper 옵션활용, useEffect 활용 높이 요소 업데이트 될 시점에서 cache.clearAll()해줌(doc 참고함))
- 윈도우 단위 스크롤링이 안되는 문제 해결(요소의 크기가 윈도우 크기를 벗어날 정도의 크기로 지정, windowScroller 기능 사용)
- 리패칭시 스크롤이 최상단으로 이동, 깜박임, 전체 페이지가 다시 랜더링 되는 문제 해결못함
  - 문제예상원인 : props를 잘못 지정한 경우(가장 의심됨)
  - 스크롤에 적합한 기능을 넣지 않은경우(infinityLoader 같은 것...)
  - 둘다 해보고 되는 해결예정

## 어려운점

- 가상화를 위해 react-window 로 간단하게 해결을 하려고 했으나 스타일링(사이즈 및 정렬)에 어려움을 느껴서 결국
- react-virtualized 를 사용했다.
- 사이즈를 잘 조절해주고 그럭저럭 넘어갈 정도로 만들고 난 다음에 기존 css 된 것과 비교해보니 차이가 났다.(간격조정, 버그발생유무, 랜더링 수, 성능)
- 성능이 더 나빠졌다. 랜더링이 많이 일어남.
- css 로 grid 적용 하는것이 훨씬 깔끔하고 디자인도 괜찮아 보이는데 가상화 하려고 사이즈 측정 부분에서 그 부분을 포기 했는데 ... 확실히 끊김없이 무한스크롤이 매끄럽게 잘 되는 것 같으나
- 랜더링이 더 많이 일어나는 부분은 아이러니 했다.
- 제대로 라이브러리 작동 원리를 모르는 것 같아서 라이브러리 코드를 하나하나 뜯어보고 분석 해봤는데
- 프롭스가 어떻게 작동되는지 정도만 파악했고 전체적인 원리는 아직 이해를 못했다.

## 해야할 일

- 리패칭 될때 깜박임 문제 해결
- 컴포넌트를 분리 해서 리팩토링
- 리덕스 저장소에서 바로 데이터 불러와서 사용(컴포넌트 분리 후 적용)
