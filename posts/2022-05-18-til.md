---
date: 2022-05-18
category: til
---

## 오늘 한 일

- 알고리즘 2개 이하로 다른비트 풀음
  - 집중이 잘 안되서 간단한 문제인데도 오래 걸렸다.
  - 집중하는게 중요한 것 같다.
- movie serarch 프로젝트
  - 테스트코드 작성 완료
  - 기타 잔버그 및 ui 수정 완료
  - 하지만... 스크롤 할때마다 깜빡이는 문제가 제법 심각하게 보여서
  - 처음부터 다시 뒤집어 엎고 다시 하는중
  - 맨 처음에 접근했던 방식으로 get(waitfornone) 으로 다 병렬로 고쳐서 스크롤 시 통신하는 방식으로 고치니까 화면이 훨씬 부드러워 졌고, 깜빡임이 없음
  - suspense 역시 안쓰는게 나을듯 하다(아직은... 조건부 suspense 적용 같은게 잘 안되고 부분적으로 사용하려 해오 나누기가 애매한 경우가 많음.
  - 병렬 통신으로 바꾸니까 스크롤 결과가 없을때 처리 방식이 바뀌어서 별도로 컴포넌트를 또 만들 려고 하고 있다.
  - 맨 마지막 통신 결과만 보고 결과가 없으면 다시 통신 하는 방식을 생각하고 있는데
  - 문제는 일일히 클릭 하게 할 건지 연속으로 5번 정도 기회를 줄건지 등을 통제 하는 방법이 제법 어렵다.
  - 배포도 내친김에 해버렸다.
  - ec2 에서는 돌아가는 서비스가 있어서 놔두었고
  - vercel 생각하고 배포했다가
  - webpack dotenv 가 vercel 에서 작동이 안되서(뭔가 다른 방법이 있는 것 같은데 안됨.ㅠ )
  - netlify 에 배포해서 env 까지 세팅해주었다. 아주 잘됨 vercel 보다 더 빠름(vercel 은 next 전용인가...)

## 어려운점

- api 가 커스텀이 안되서 어렵다
- api 에 맞춰서 해야되는데 원하는 기능이 있는 api 가 없어서 문제다
- 필터링을 했는데 검색 결과가 없을때 어떻게 할지
- 5번까지 필터링 했는데 검색 결과가 없으면 한번 더 찾아볼래요? 라고 버튼 띄우고 버튼 클릭하면 다시 5번 찾는 걸로 하고 싶다.
- 문제는 순회되는 부분에서 밖에 검색 결과가 있는지 없는지를 모른다.
- 커서마다 몇개씩 찾았는지 기억을 시켜야 되고
- 연속으로 찾은 것이 0 인 적이 5회 이상일 경우
- 이런식으로 하면되는데
- 정말 문제는 순회되는 부분에서 밖에 검색 결과가 있는지 없는지를 모른다는 것이다..
- 순회되는 곳에서 셋을 해버리면 불필요한 랜더링이 100% 일어난다 순회되고 있는 컴포넌트 이기 때문이다.
- 방법은 기존에 방법(일덱스별 결과수를 저장하는 방법)으로 하면된다. 조금만 더 고민해보자.ㅠ

## 해야할 일

- 무한스크롤 tv 는 기존방식 놔두기(비교 용)
- 무한스크롤 movie 는 검색 결과 없을 시 어떻게 할지 를 좀더 고민 해서 적용 할 것
- 다 끝나면 바뀐부분 테스트코드 작성하면서 버그 찾기
- 그리고 하.. 무한스크롤 좀더 나은 방법이 없는지 고민 해볼것
