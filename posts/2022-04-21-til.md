---
date: 2022-04-21
category: til
---

## 오늘 한 일

- 리덕스를 공식문서를 쭈욱 읽고 패턴과, 원칙, 주의사항을 훝어봤다.
- 사용설명서를 읽는 느낌으로 더듬더듬 하나씩 설명서대로 작성했고
- 초과근무 프로젝트에서 swr 을 걷어내고, recoil 도 걷어내고 useHook 도 필요 없는 것은 걷어냈다.
- thunk 에서 조금 헤맸는데 몇번 해보니 익숙해 졌다.
- 통신은 총 3가지 방법으로 적용했다
  - 일반 get : redus RTK
  - post 통신 : 리덕스 아닌것(useMutation 훅), 리덕스(thunk)
- RTK 는 그냥 적용해서 아무 옵션 없이 get 받아오고 refetch 하는 방법만 안다. 더 공부해야 한다.

## 어려운점

- redux 웬지 별로 내키지 않았다.
- 너무 코드가 길고, 복잡해 보이고 그런 첫 인상때문에
- 처음 보자마자 부정적으로 생각해서 그런 것 같았다.
- 하지만 오늘 써보고 느낀점은 만족 스러웠다.
- 첫째, 기존에 나름 모듈화 시킨 큰 컴포넌트에 state 와 함수가 모여서 엄청 복잡했다면
- 지금은 전부 쪼개고 나눠서 깔끔한 컴포넌트가 되었다.
- 숨겨진 기능(비동기 하면서 중간중간에 콜백 이나 상태에 따라서 여러가지 작업 수행 할 수 있음)이 꽤 있어서
- 게다가 중복되는 것은 별도로 또 처리 해 줄수도 있고,
- useMutation 훅 은 컴포넌트가 지저분해지는 단점이 있는데
- 데이터만 따로 빼서 관리 해버리니까 확실히 컴포넌트가 깨끗해 졌다.
- 마지막으로 그럼에도 불구하고 큰용량(11MB 넘어가고,,,)
- 무겁고, 사용 안해도 될 것 같기고 한 고민을 그나마 줄여준 기능이 RTK 기능이었다.
- 이 것은 swr react query 를 따라 한 거라고 doc에 대놓고 적어 놔서 유사하지만
- doc 말대로라면 더 좋은 장점이 있다고 한다.(아직 배우는 단계라 모르겠지만)
- 솔직히 기대감이 있다.
- react-query swr 보다 나은점은 별도 키 마저 recuder 만들듯이 다 슬라이스로 짬뽕해서 만들어서
- 키도 자동으로 만들어서 훅을 export 해주니. 다른 기능도 차차 알아가면서 재미가 있을 것 같았다.
- 그런데 지금 recoil 용량을 보니 2mb 인데 리덕스 툴킷 11mb 용량 보고 기분이 찹찹해 진다.. ㅠㅠ
- 그래도 나름 재미 있었다.
- 초과근무 프로젝트는 redux 와 hook 을 섞어서 마무리 하려고 한다. (진작 이렇게 할 걸)

## 해야 할 일

- 타이머 페이지 / 기록 레코드 애니메이션 처리 되게 수정할 것(내려갈때 보기 안좋음)
- 타이머 페이지 유저상태 정보를 계속 가져오게 해서(페이지 처음 들어갈때 가져올 것!)
- 유저 상태 보고 타이머 작동 하고 안하고를 판단하게 할 것
- 기록 페이지도 리덕스로 전부 고칠 것!
