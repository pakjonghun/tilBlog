---
date: 2022-05-09
category: til
---

## 오늘 한 일

- 알고리즘 문제(큰수만들기)도전해봄
- 큰수만들기 문제(조합은 시간초과, 정렬해서 작은수먼저 없애기=> 규칙에 안맞음)는 아직 못풀었다.
- 영화찾기 프로젝트 진행
  - 필터 컴포넌트 디자인 작성
  - 필터 컴포넌트 테스트 코드 작성
  - 오류 수정(소스맵 로더 삭제)
  - 테이블, 데이터 저장소, 통신 방법 구상
  - axios 인스턴스 작성
  - 첫번째 getFetch 훅 작성

## 어려운점

- 알고리즘 프로그래머스 큰수 만들기 문제
  - 큰수 만들기 문제는 처음에는 쉬울줄 알았다.
  - 하지만 조합을 이용한 방법이 시간초과로 막히고
  - 정렬을 이용한 방법도 패턴, 규칙을 잘못 이해해서 막히고
  - 다른사람의 풀이(3중 반복문, 앞에서 부터 비교하면서 반복)는 이해가 안되서 시도를 안했다
  - 조금만 더 고민하면 될 것 같은데 시간이 오래 걸려서 중간에 멈추었다.
- 영화찾기 프로젝트는 웹팩의 소스맵 로더가 문제 해결, 데이터 출력 방법 구상

  - 필터 컴포넌트는 테스트 코드 작성을 다 했고,
  - 테스트 코드가 모두 잘 작동 하니까 든든한 느낌이 들었다.
  - 테스트코드를 적용하기 위해 일부 시멘틱 한 태그로 변경했다.(span=>h3, div=>ul,li)
  - axios extense 를 source-map-loader 가 모듈을 읽어오지 못해서 오류가 발생했다.
  - webpack doc 를 보니 webpack 에서 유지보수 하지 않는 모듈이라고 나와 있었다.
  - 비슷한 관련이슈도 구글링 하니 많이 있어서
  - 소스맵을 솔직히 잘 사용하지도 않고 있고,
  - 대체 할만한 webpack 에서 제공하는 별도 소스맵 플러그 인도 있어서
  - 일단 소스맵 로더는 삭제 해주었다. 삭제하니 오류는 사라졌다.
  - axios 로 캐슁을 할 수 있도록 axios/extense를 설치하고 공식문서를 참고해서 초기세팅을 해주었다.
  - 그리고 tmdb api 에서 테스트했는데 캐슁이 잘 작동했다.
  - fetch 훅을 작성했는데 이 훅은 패칭 하는 함수와 로딩중인지 에러가 있는지를 반환한다.
  - 이 훅에 데이터를 함께 포함시키면 데이터 타입을 유연하게 바꾸기가 힘들고 할 수가 없고,
  - 데이터를 페이지네이션이나, 정렬, 기타 변경할 내용이 생겼을때
  - 빼내서 사용하기가 불편할 것이라고 판단했다.
  - 그래서 오로지 통신 기능, 통신 중인지, 오류가 있는지만 확인하는 훅으로 분리했다
  - homecontext 에 저장소를 둘 생각이다.
  - 총 8개 저장소를 (인기영화, 인기TV, 영화 검색결과, TV 검색결과, 장르별 영화, 장르별TV, 평점순 영화와 TV)만들 생각이다.
  - 통신의 종류는 총 4가지로 구상했다(인기영화,인기TV,영화검색결과, TV 검색결과)
  - 인기영화, 인기TV 에서 나온 데이터를 장르별로 구분해서 데이터를 가공 해서 저장 할 생각이다.
  - 먼저 필터 별로 통신 방법을 정한다.
    - 스위치가 선택한 인기 콘텐츠 통신 default
    - ~~검색을 할 경우검색 하는 통신으로 변경~~
  - 필터에 평점이나 장르가 선택이 됬을때
    - 아쉽게도 api 통신 단계에서 이것을 필터링 해 줄수는 없었다.
    - 서버를 내가 만들거나 해야 되는데 일단 프론트에서 필터링 작업을 해주기로 했다.
    - 위에 선택된 스위치 별로 통신을 하고 응답을 받을때
    - ~~받은 데이터를 장르별로 가공해서 장르 저장소에 넣고~~
    - ~~또 받은 데이터를 평점별로 가공해서 평점 저장소에 넣는다~~
    - 이때 생각을 잘 해야되는데
      - 각 저장소는 또 다른 스위치(평점별로 보기, 장르별로 보기)에서 선택 한 대로 보여주기 위한 저장소 이지 필터링을 위한 저장소는 아니다.
      - 또 각 저장소에서 필터링 된 데이터가 몇개인지는 미리 알 수는 없다(그냥 총 데이터 숫자만 알 수 있음)
      - 그러므로 각각의 저장소에 필터링 기능을 별도로 적용 해야 한다.
      - 만약 tv 평점 1 액션 이 선택이 됬다면
        - 인기tv 통신을 한 후 -> 통신결과 중 평점 1과 액션 장르만 저장소에 넣어야 한다(인기 tv 저장소)
        - ~~그리고 사용자가 평점별로 보기, 장르별로 보기를 선택 할 것을 대비해서 미리 받은 데이터를 평점별 구분해서 평점 저장소에 넣고~~
        - ~~장르별 구분해서 장르 저장소에 넣어야 한다.~~
      - 그런데 이건 지금 구상한 생각이고
        - 적다보니 너무 할 일이 많아 지는 것 같아서 조금 더 간소화 시키자면
        - 인기tv 통신을 한 후 -> 통신결과 중 평점 1과 액션 장르만 저장소에 넣어야 한다(인기 tv 저장소)
        - 사용자가 평점별 보기를 클릭하면 각 평점 별로 나눈 큰 카테고리만 화면에 띄운다.
        - 사용자가 카테고리를 클릭하면 그때 다시 통신하면서(통신이 캐슁 되 있으므로 캐슁된 데이터를 그대로 사용할 듯 한데?)그 데이터 중 해당 평점 결과만 띄운다.
        - 장르도 마찬가지 사용자가 장르별로 보기 를 클릭하면 장르별로 카테고리만 띄워놓고
        - 사용자가 장르를 선택하면 그때서야 장르별 데이터를 검색한다.
        - 아 그리고 검색결과 통신은 안하는게 좋을까?
        - 일단 인기검색 통신 하나만 사용해서 필터링 결과까지만 출력 할 수 있게 만들자.
        - 다 하면 무한 스크롤 구현을 페이지만 바꾸면서 계속 스테이스에 쌓는 걸로 하자
        - 스테이트를 비우는 시점을 잘 생각해야 하는데
          - 당장은 tv movie 스위치를 건들때 만 비우면 될 것 같다
          - 아니.. 비우는게 아니라 저장소만 바꿔주면 될 것 같다.

  ## 해야 할 일

  - 영화 검색 프로젝트
    - 통신은 인기 영화 인기 tv 통신만 한다.
    - 모든 tv 데이터가 다 들어가는 tv 스테이트 작성
    - 모든 영화 데이터가 다 들어가는 영화 스테이트 작성
    - 인기영화 리스트 무한스크롤 방식으로 작성
    - 인기tv 리스트 무한 스크롤 방식으로 작성
    - 필터에서 영화 tv 바꿀때마다 저장소 변경
    - 필터에서 장르 평점 선택 할때마다 필터링 적용
      - 저장소를 별도로 만들어서 해보기도 하고, 이미 캐슁된 데이터에 접근해서 하는 방법을 시도 해보기도 하고 둘다 해보자.
      - 저장소를 만들어서 하는 방법이 가장 무난 할 것 같다.
        - 필터링 저장소에는 사용자가 필터 를 선택하면 그 조건에 맞는 데이터를 전체 저장소에서 빼와서 저장하고 이 저장소를 화면에 출력한다.
      - 캐슁된 데이터에 접근해서 하는 방법
        - 사용자가 필터링 하면 그냥 전체 스테이트를 필터링 한 스테이트로 바꿔버리고
        - 다시 사용자가 필터링 하면
        - 캐쉬에 접근해서(이건 아직 어떻게 하는지 정확히 모름, 페이지 별 통신을 순회하면서 다시 해야 할지, 아니면 별도로 접근 방법이 있는지)필터링
    - 장르별 보기, 평점별 보기 스위치 작성
    - 스위치별 카테고리 페이지 작성
    - 장르별 보기, 평점별 보기 스위치 클릭시 카테고리 출력
    - 카테고리 클릭시 해당 카테버리별로 필터링 된 데이터 출력
